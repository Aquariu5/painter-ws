{"ast":null,"code":"var _jsxFileName = \"/home/operator3/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/newBD/front/src/components/pages/Countries.jsx\",\n    _s = $RefreshSig$();\n\nimport { useSelector } from 'react-redux';\nimport { Header } from '../ui-components/Header'; // import cl from '../../../styles/Info.module.css';\n\nimport { countries } from '../dataBase/countries';\nimport { useState } from 'react/cjs/react.development'; // import Image from '../../ui-components/Image';\n\nimport { Container, DropdownButton, Image } from 'react-bootstrap';\nimport fs from 'fs';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport { TableComp } from '../ui-components/TableComp';\nimport { TableChars } from '../ui-components/TableChars';\nimport { Modal, Button } from 'react-bootstrap'; //const fetch = require('node-fetch');\n\nimport cl from '../../styles/Countries.module.css';\nimport { AddModal } from '../modals/AddModal';\nimport { Dropdown } from 'bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Countries = props => {\n  _s();\n\n  //let arr = countries;\n  // let jsx = '';\n  // for (let el of arr)\n  // {\n  //     let fields = el.to;\n  //     jsx += <p>{el.name}</p>\n  //     for (let fi of fields)\n  //         jsx += <li>{fi}</li>\n  // }\n  let init = [];\n  const [body, setBody] = useState(init);\n  const [str, setStr] = useState({\n    country: 'Россия',\n    name: ''\n  });\n  const [isload, setLoad] = useState(false);\n  const [countNames, setCountNames] = useState([]);\n  const [arr, setArr] = useState([]);\n  const [countries, setCountries] = useState({});\n  const [urlName, setUrlName] = useState('');\n  const [name, setName] = useState('');\n  const [fname, setFname] = useState('');\n  const [capture, setCaptureFile] = useState({});\n  const [visible, setVisible] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [country, setCountry] = useState('Россия');\n  const [chars, setChars] = useState({});\n  const bodyStatic = ['Зига', \"Твой\", \"Дом\"];\n  const sortArr = ['По имени', \"По дате\"];\n  const [sort, setSort] = useState('По имени');\n  console.log('country', country);\n  useEffect(async () => {\n    setLoad(false);\n    let fetchCounts;\n    fetchCounts = await axios.get('http://localhost:5000/countries');\n    fetchCounts = fetchCounts.data.countries;\n    setCountries(fetchCounts);\n    setArr(fetchCounts.map(el => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: el.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }, this), el.to.map(name => /*#__PURE__*/_jsxDEV(\"li\", {\n          onMouseOver: () => showPic(true, name),\n          onMouseOut: () => showPic(false, name),\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 39\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this);\n    }));\n    setCountNames(fetchCounts.map(el => el.name));\n    setLoad(true);\n    console.log('countries', countries);\n  }, [countries.length]); //console.log(jsx)                 {\n  //                 countNames.map(el => <option>{el}</option>)\n  //                }\n\n  const showPic = (flag, name) => {\n    console.log('name', name);\n    setUrlName(`http://localhost:5000/image?name=${name}`);\n    setVisible(flag);\n  }; // const add = async () => {\n  //     setBody(prev => [...prev, { country: str.country, name: str.name }]);\n  //     let fetchCounts = await axios.get(`http://localhost:5000/add?country=${str.country}&name=${str.name}`);\n  //     fetchCounts = fetchCounts.data;\n  //     setCountries(fetchCounts);\n  //     setArr(fetchCounts.map(el => {\n  //         return (<div>\n  //             <p>{el.name}</p>\n  //             {\n  //                 el.to.map(name => <li onMouseOver={() => showPic(true, name)} onMouseOut={() => showPic(false, name)}>{name}</li>)\n  //             }\n  //         </div>);\n  //     }));\n  // }\n\n\n  const deleteById = async name => {\n    setBody(prev => prev.filter(el => el.name != name));\n    let fetchCounts = await axios.get(`http://localhost:5000/delete?country=${str.country}&name=${str.name}`);\n    fetchCounts = fetchCounts.data;\n    setCountries(fetchCounts);\n    setArr(fetchCounts.map(el => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: el.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 17\n        }, this), el.to.map(name => /*#__PURE__*/_jsxDEV(\"li\", {\n          onMouseOver: () => showPic(true, name),\n          onMouseOut: () => showPic(false, name),\n          children: name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 39\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this);\n    })); // setCountries(prev => {\n    // console.log('delete name', name);\n    // setBody(prev => prev.filter(el => {\n    //     console.log('el', el);\n    //     return !String(el).includes(name);\n    // }\n    //     ));\n  };\n\n  const setNameFunc = e => {\n    setStr(prev => {\n      return { ...prev,\n        name: e.target.value\n      };\n    });\n  };\n\n  const getImage = async name => {\n    console.log('infunc');\n    let img = (await axios.get(`http://localhost:5000/image?name=${name}`)).data;\n    console.log('img', img);\n    return img;\n  };\n\n  const openModal = async name => {\n    console.log('aame', name);\n    setShowModal(true);\n    setName(name);\n    let chars = (await axios.get(`http://localhost:5000/info?name=${name}`)).data; //console.log('chars', chars);\n\n    setChars(chars);\n  };\n\n  const addNote = () => {\n    setShowAddModal(true);\n  };\n\n  const add = () => {\n    console.log('capt', capture);\n    const data = new FormData();\n    data.append('file', capture); //capture.map(dat => URL.createObjectURL(dat));\n\n    let url = URL.createObjectURL(capture);\n    console.log('url', url);\n    axios.post('http://localhost:5000/upload', data, {\n      headers: {\n        \"Content-type\": \"form/multipart\"\n      }\n    });\n  };\n\n  return isload ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: cl.Countries,\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      name: \"\\u0421\\u0442\\u0440\\u0430\\u043D\\u044B \\u043B\\u0438\\u0434\\u0435\\u0440\\u044B \\u043F\\u043E \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0441\\u0442\\u0432\\u0443 \\u0411\\u041F\\u041B\\u0410\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'space-between'\n        },\n        children: countries.length ? countries.map(count => {\n          return /*#__PURE__*/_jsxDEV(TableComp, {\n            style: {\n              width: '30px'\n            },\n            header: count.name,\n            body: count.to,\n            onOver: (flag, name) => showPic(flag, name),\n            onOut: (flag, name) => showPic(flag, name),\n            onClick: name => openModal(name),\n            propFlag: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 170,\n            columnNumber: 33\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0416\\u0434\\u0438\\u0442\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            margin: '10px'\n          },\n          onClick: addNote,\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(DropdownButton, {\n          style: {\n            margin: '10px'\n          },\n          title: sort,\n          onSelect: e => setSort(e),\n          children: sortArr.map(el => /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            eventkey: el,\n            children: el\n          }, el, false, {\n            fileName: _jsxFileName,\n            lineNumber: 196,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: visible ? 'flex' : 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(Image, {\n        src: urlName,\n        style: {\n          width: '320px',\n          height: '240px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      onHide: () => setShowModal(false),\n      backdrop: \" static \",\n      keyboard: false,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: [\" \", name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 218,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [/*#__PURE__*/_jsxDEV(TableChars, {\n          header: name,\n          body: chars\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Image, {\n          src: urlName,\n          style: {\n            width: '320px',\n            height: '240px',\n            margin: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(AddModal, {\n      show: showAddModal,\n      setShow: setShowAddModal,\n      setItem: setCountry,\n      item: country,\n      title: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\",\n      countries: countNames,\n      name: name,\n      setName: setName,\n      fname: fname,\n      setFname: setFname,\n      setCaptureFile: setCaptureFile,\n      capture: capture,\n      add: add\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 13\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u041F\\u0430\\u0434\\u0430\\u0436\\u0436\\u0438\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 246,\n    columnNumber: 13\n  }, this);\n};\n\n_s(Countries, \"z+dP1LVAu8LUwhy2J92iC2joRrs=\");\n\n_c = Countries;\n\nvar _c;\n\n$RefreshReg$(_c, \"Countries\");","map":{"version":3,"sources":["/home/operator3/Документы/newBD/front/src/components/pages/Countries.jsx"],"names":["useSelector","Header","countries","useState","Container","DropdownButton","Image","fs","useEffect","axios","TableComp","TableChars","Modal","Button","cl","AddModal","Dropdown","Countries","props","init","body","setBody","str","setStr","country","name","isload","setLoad","countNames","setCountNames","arr","setArr","setCountries","urlName","setUrlName","setName","fname","setFname","capture","setCaptureFile","visible","setVisible","showModal","setShowModal","showAddModal","setShowAddModal","setCountry","chars","setChars","bodyStatic","sortArr","sort","setSort","console","log","fetchCounts","get","data","map","el","to","showPic","length","flag","deleteById","prev","filter","setNameFunc","e","target","value","getImage","img","openModal","addNote","add","FormData","append","url","URL","createObjectURL","post","headers","display","flexDirection","justifyContent","count","width","margin","height"],"mappings":"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","sourcesContent":["import { useSelector } from 'react-redux';\nimport {Header} from '../ui-components/Header'\n// import cl from '../../../styles/Info.module.css';\nimport { countries } from '../dataBase/countries';\nimport { useState } from 'react/cjs/react.development';\n// import Image from '../../ui-components/Image';\nimport { Container, DropdownButton, Image } from 'react-bootstrap';\nimport fs from 'fs';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport { TableComp } from '../ui-components/TableComp';\nimport { TableChars } from '../ui-components/TableChars';\nimport { Modal, Button } from 'react-bootstrap';\n//const fetch = require('node-fetch');\nimport cl from '../../styles/Countries.module.css'\nimport { AddModal } from '../modals/AddModal';\nimport { Dropdown } from 'bootstrap';\nexport const Countries = (props) => {\n\n    //let arr = countries;\n    // let jsx = '';\n    // for (let el of arr)\n    // {\n    //     let fields = el.to;\n    //     jsx += <p>{el.name}</p>\n    //     for (let fi of fields)\n    //         jsx += <li>{fi}</li>\n    // }\n    \n    let init = []\n    const [body, setBody] = useState(init);\n    const [str, setStr] = useState({ country: 'Россия', name: '' });\n    const [isload, setLoad] = useState(false);\n    const [countNames, setCountNames] = useState([]);\n    const [arr, setArr] = useState([]);\n    const [countries, setCountries] = useState({});\n    const [urlName, setUrlName] = useState('');\n    const [name, setName] = useState('');\n    const [fname, setFname] = useState('');\n    const [capture, setCaptureFile] = useState({});\n    const [visible, setVisible] = useState(false);\n    const [showModal, setShowModal] = useState(false);\n    const [showAddModal, setShowAddModal] = useState(false);\n    const [country, setCountry] = useState('Россия')\n    const [chars, setChars] = useState({});\n    const bodyStatic = ['Зига', \"Твой\", \"Дом\"];\n\n    const sortArr = ['По имени', \"По дате\"];\n    const [sort, setSort] = useState('По имени')\n    console.log('country', country);\n    useEffect(async () => {\n        setLoad(false);\n        let fetchCounts;\n        fetchCounts = await axios.get('http://localhost:5000/countries');\n        fetchCounts = fetchCounts.data.countries;\n        setCountries(fetchCounts);\n        \n        setArr(fetchCounts.map(el => {\n            return (<div>\n                <p>{el.name}</p>\n                {\n                    el.to.map(name => <li onMouseOver={() => showPic(true, name)} onMouseOut={() => showPic(false, name)}>{name}</li>)\n                }\n            </div>);\n        }));\n        setCountNames(fetchCounts.map(el => el.name));\n        setLoad(true);\n        console.log('countries', countries);\n    }, [countries.length]);\n\n    //console.log(jsx)                 {\n    //                 countNames.map(el => <option>{el}</option>)\n    //                }\n    const showPic = (flag, name) => {\n        console.log('name', name);\n        setUrlName(`http://localhost:5000/image?name=${name}`);\n        setVisible(flag);\n        \n    }\n\n    // const add = async () => {\n    //     setBody(prev => [...prev, { country: str.country, name: str.name }]);\n    //     let fetchCounts = await axios.get(`http://localhost:5000/add?country=${str.country}&name=${str.name}`);\n    //     fetchCounts = fetchCounts.data;\n    //     setCountries(fetchCounts);\n    //     setArr(fetchCounts.map(el => {\n    //         return (<div>\n    //             <p>{el.name}</p>\n    //             {\n    //                 el.to.map(name => <li onMouseOver={() => showPic(true, name)} onMouseOut={() => showPic(false, name)}>{name}</li>)\n    //             }\n    //         </div>);\n    //     }));\n    // }\n\n    const deleteById = async (name) => {\n        setBody(prev => prev.filter(el => el.name != name));\n\n        let fetchCounts = await axios.get(`http://localhost:5000/delete?country=${str.country}&name=${str.name}`);\n        fetchCounts = fetchCounts.data;\n        setCountries(fetchCounts);\n        setArr(fetchCounts.map(el => {\n            return (<div>\n                <p>{el.name}</p>\n                {\n                    el.to.map(name => <li onMouseOver={() => showPic(true, name)} onMouseOut={() => showPic(false, name)}>{name}</li>)\n                }\n            </div>);\n        }));\n        // setCountries(prev => {\n        // console.log('delete name', name);\n        // setBody(prev => prev.filter(el => {\n        //     console.log('el', el);\n        //     return !String(el).includes(name);\n        // }\n        //     ));\n    }\n\n    const setNameFunc = (e) => {\n        setStr(prev => {\n            return { ...prev, name: e.target.value };\n        })\n    }\n\n    const getImage = async (name) => {\n        console.log('infunc');\n         let img = (await axios.get(`http://localhost:5000/image?name=${name}`)).data;\n         console.log('img', img);\n         return img;\n    }\n\n    const openModal = async (name) => {\n        console.log('aame', name);\n        setShowModal(true);\n        setName(name);\n        let chars = (await axios.get(`http://localhost:5000/info?name=${name}`)).data;\n        //console.log('chars', chars);\n        setChars(chars);\n    }\n\n    const addNote = () => {\n        setShowAddModal(true);\n    }\n\n    const add = () => {\n        console.log('capt', capture);\n        const data = new FormData();\n        data.append('file', capture);\n        //capture.map(dat => URL.createObjectURL(dat));\n        let url = URL.createObjectURL(capture);\n        console.log('url', url);\n        axios.post('http://localhost:5000/upload', data, {\n            headers: {\n                \"Content-type\": \"form/multipart\"\n            }\n        });\n\n    }\n    return (\n        isload ?\n            <div className={cl.Countries}>\n                <Header name=\"Страны лидеры по производству БПЛА\" />\n                <div>\n                    <div style={{display: 'flex', flexDirection: 'row', justifyContent: 'space-between'}}>\n                        {\n                        countries.length ?\n                        (\n                        countries.map(count => {\n                            return (\n                                <TableComp\n                                    style={{width: '30px'}}\n                                    header={count.name}\n                                    body={count.to}\n                                    onOver={(flag, name) => showPic(flag, name)}\n                                    onOut={(flag, name) => showPic(flag, name)}\n                                    onClick={(name) => openModal(name)}\n                                    propFlag={true}\n                                />\n                            )\n\n                        })\n                        )\n                        :\n                        <p>Ждите</p>\n                        }\n                    </div>\n                    <div style={{display: 'flex', flexDirection: 'row'}}>\n                        <Button style={{margin: '10px'}} onClick={addNote}>+</Button>\n                        <DropdownButton\n                            style={{margin: '10px'}}\n                            title={sort}\n                            onSelect={e => setSort(e)}\n                        >\n                        {\n                            sortArr.map(el =>\n                                <Dropdown.Item\n                                    key={el}\n                                    eventkey={el}\n                                >\n                                    {el}\n                                </Dropdown.Item>\n                                )\n                        }\n                        </DropdownButton>\n                    </div>\n                    \n                </div>\n                    <div style={{display: visible ? 'flex' : 'none'}}>\n                        <Image src={urlName} style={{width: '320px', height: '240px'}} />\n                    </div>\n                    <Modal\n                        show ={ showModal }\n                        onHide={() => setShowModal(false)}\n                        backdrop =\" static \"\n                        keyboard ={ false }\n                    >\n                        < Modal.Header closeButton >\n                        < Modal.Title > {name}</ Modal.Title >\n                        </ Modal.Header >\n                        < Modal.Body >\n                            <TableChars\n                                header={name}\n                                body={chars}\n                            />\n                            <Image src={urlName} style={{width: '320px', height: '240px', margin: '10px'}} />\n                        </Modal.Body >\n                    </ Modal >\n\n                    <AddModal\n                        show={showAddModal}\n                        setShow={setShowAddModal}\n                        setItem={setCountry}\n                        item={country}\n                        title=\"Добавить\"\n                        countries={countNames}\n                        name={name}\n                        setName={setName}\n                        fname={fname}\n                        setFname={setFname}\n                        setCaptureFile={setCaptureFile}\n                        capture={capture}\n                        add={add}\n                    />\n            </div>\n            :\n            <div>\n                Падажжи\n            </div>\n            \n    );\n}\n"]},"metadata":{},"sourceType":"module"}