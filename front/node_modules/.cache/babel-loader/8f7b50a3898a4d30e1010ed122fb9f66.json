{"ast":null,"code":"var _jsxFileName = \"/home/operator3/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/newBD/front/src/components/pages/Countries.jsx\",\n    _s = $RefreshSig$();\n\nimport { useSelector } from 'react-redux';\nimport { Header } from '../ui-components/Header'; // import cl from '../../../styles/Info.module.css';\n\nimport { countries } from '../dataBase/countries';\nimport { useState, useMemo } from 'react'; // import Image from '../../ui-components/Image';\n\nimport { Container, DropdownButton, Dropdown, Image } from 'react-bootstrap';\nimport fs from 'fs';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport { TableComp } from '../ui-components/TableComp';\nimport { TableChars } from '../ui-components/TableChars';\nimport { Modal, Button } from 'react-bootstrap'; //const fetch = require('node-fetch');\n\nimport cl from '../../styles/Countries.module.css';\nimport { AddModal } from '../modals/AddModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Countries = props => {\n  _s();\n\n  //let arr = countries;\n  // let jsx = '';\n  // for (let el of arr)\n  // {\n  //     let fields = el.to;\n  //     jsx += <p>{el.name}</p>\n  //     for (let fi of fields)\n  //         jsx += <li>{fi}</li>\n  // }\n  let init = [];\n  const [body, setBody] = useState(init);\n  const [str, setStr] = useState({\n    country: 'Россия',\n    name: ''\n  });\n  const [isload, setLoad] = useState(false);\n  const [countNames, setCountNames] = useState([]);\n  const [countries, setCountries] = useState({});\n  const [filteredCountries, setFilteredCountries] = useState({});\n  const [urlName, setUrlName] = useState('');\n  const [name, setName] = useState('');\n  const [fname, setFname] = useState('');\n  const [capture, setCaptureFile] = useState({});\n  const [visible, setVisible] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [country, setCountry] = useState('Россия');\n  const [chars, setChars] = useState({});\n  const bodyStatic = ['Зига', \"Твой\", \"Дом\"];\n  const sortArr = [\"По дате\", 'По имени'];\n  const [sort, setSort] = useState('По дате');\n  console.log('country', country);\n  const HeaderMemo = useMemo(() => Header, []);\n  useEffect(async () => {\n    setLoad(false);\n    let fetchCounts;\n    fetchCounts = await axios.get('http://localhost:5000/countries');\n    fetchCounts = fetchCounts.data.countries;\n    setCountries(fetchCounts);\n    setCountNames(fetchCounts.map(el => el.name));\n    setLoad(true);\n    console.log('countries', countries);\n  }, [countries.length]);\n  useEffect(async () => {\n    if (countries != undefined && countries.length) {\n      console.log('beforefiltered', countries);\n      setCountries(prev => {\n        prev.map(c => {\n          c.to = c.to.sort();\n          return c;\n        });\n        return prev;\n      });\n      console.log('filtercounts', countries);\n      setLoad(false);\n      setLoad(true);\n    }\n  }, [sort]); //console.log(jsx)                 {\n  //                 countNames.map(el => <option>{el}</option>)\n  //                }\n\n  const showPic = (flag, name) => {\n    console.log('name', name);\n    setUrlName(`http://localhost:5000/image?name=${name}`);\n    setVisible(flag);\n  };\n\n  const setNameFunc = e => {\n    setStr(prev => {\n      return { ...prev,\n        name: e.target.value\n      };\n    });\n  };\n\n  const getImage = async name => {\n    console.log('infunc');\n    let img = (await axios.get(`http://localhost:5000/image?name=${name}`)).data;\n    console.log('img', img);\n    return img;\n  };\n\n  const openModal = async name => {\n    console.log('aame', name);\n    setShowModal(true);\n    setName(name);\n    let chars = (await axios.get(`http://localhost:5000/info?name=${name}`)).data; //console.log('chars', chars);\n\n    setChars(chars);\n  };\n\n  const addNote = () => {\n    setShowAddModal(true);\n  };\n\n  const add = () => {\n    console.log('capt', capture);\n    const data = new FormData();\n    data.append('file', capture); //capture.map(dat => URL.createObjectURL(dat));\n\n    let url = URL.createObjectURL(capture);\n    console.log('url', url);\n    axios.post('http://localhost:5000/upload', data, {\n      headers: {\n        \"Content-type\": \"form/multipart\"\n      }\n    });\n  };\n\n  return isload ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: cl.Countries,\n    children: [/*#__PURE__*/_jsxDEV(HeaderMemo, {\n      name: \"\\u0421\\u0442\\u0440\\u0430\\u043D\\u044B \\u043B\\u0438\\u0434\\u0435\\u0440\\u044B \\u043F\\u043E \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0441\\u0442\\u0432\\u0443 \\u0411\\u041F\\u041B\\u0410\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'space-between'\n        },\n        children: filteredCountries.length ? filteredCountries.map(count => {\n          return /*#__PURE__*/_jsxDEV(TableComp, {\n            style: {\n              width: '30px'\n            },\n            header: count.name,\n            body: count.to,\n            onOver: (flag, name) => showPic(flag, name),\n            onOut: (flag, name) => showPic(flag, name),\n            onClick: name => openModal(name),\n            propFlag: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 141,\n            columnNumber: 33\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0416\\u0434\\u0438\\u0442\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          style: {\n            margin: '10px'\n          },\n          onClick: addNote,\n          children: \"+\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(DropdownButton, {\n          style: {\n            margin: '10px'\n          },\n          title: sort,\n          onSelect: e => setSort(e),\n          children: sortArr.map(el => /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n            eventKey: el,\n            children: el\n          }, el, false, {\n            fileName: _jsxFileName,\n            lineNumber: 167,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 158,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: visible ? 'flex' : 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(Image, {\n        src: urlName,\n        style: {\n          width: '320px',\n          height: '240px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 180,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      onHide: () => setShowModal(false),\n      backdrop: \" static \",\n      keyboard: false,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: [\" \", name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [/*#__PURE__*/_jsxDEV(TableChars, {\n          header: name,\n          body: chars\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 192,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Image, {\n          src: urlName,\n          style: {\n            width: '320px',\n            height: '240px',\n            margin: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 191,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(AddModal, {\n      show: showAddModal,\n      setShow: setShowAddModal,\n      setItem: setCountry,\n      item: country,\n      title: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\",\n      countries: countNames,\n      name: name,\n      setName: setName,\n      fname: fname,\n      setFname: setFname,\n      setCaptureFile: setCaptureFile,\n      capture: capture,\n      add: add\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 13\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u041F\\u0430\\u0434\\u0430\\u0436\\u0436\\u0438\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 217,\n    columnNumber: 13\n  }, this);\n};\n\n_s(Countries, \"+YCFH+oMunIyGeBmxks9z9SdsWE=\");\n\n_c = Countries;\n\nvar _c;\n\n$RefreshReg$(_c, \"Countries\");","map":{"version":3,"sources":["/home/operator3/Документы/newBD/front/src/components/pages/Countries.jsx"],"names":["useSelector","Header","countries","useState","useMemo","Container","DropdownButton","Dropdown","Image","fs","useEffect","axios","TableComp","TableChars","Modal","Button","cl","AddModal","Countries","props","init","body","setBody","str","setStr","country","name","isload","setLoad","countNames","setCountNames","setCountries","filteredCountries","setFilteredCountries","urlName","setUrlName","setName","fname","setFname","capture","setCaptureFile","visible","setVisible","showModal","setShowModal","showAddModal","setShowAddModal","setCountry","chars","setChars","bodyStatic","sortArr","sort","setSort","console","log","HeaderMemo","fetchCounts","get","data","map","el","length","undefined","prev","c","to","showPic","flag","setNameFunc","e","target","value","getImage","img","openModal","addNote","add","FormData","append","url","URL","createObjectURL","post","headers","display","flexDirection","justifyContent","count","width","margin","height"],"mappings":";;;AAAA,SAASA,WAAT,QAA4B,aAA5B;AACA,SAAQC,MAAR,QAAqB,yBAArB,C,CACA;;AACA,SAASC,SAAT,QAA0B,uBAA1B;AACA,SAASC,QAAT,EAAmBC,OAAnB,QAAkC,OAAlC,C,CACA;;AACA,SAASC,SAAT,EAAoBC,cAApB,EAAoCC,QAApC,EAA8CC,KAA9C,QAA2D,iBAA3D;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,4BAA1B;AACA,SAASC,UAAT,QAA2B,6BAA3B;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,iBAA9B,C,CACA;;AACA,OAAOC,EAAP,MAAe,mCAAf;AACA,SAASC,QAAT,QAAyB,oBAAzB;;AACA,OAAO,MAAMC,SAAS,GAAIC,KAAD,IAAW;AAAA;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAIC,IAAI,GAAG,EAAX;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBnB,QAAQ,CAACiB,IAAD,CAAhC;AACA,QAAM,CAACG,GAAD,EAAMC,MAAN,IAAgBrB,QAAQ,CAAC;AAAEsB,IAAAA,OAAO,EAAE,QAAX;AAAqBC,IAAAA,IAAI,EAAE;AAA3B,GAAD,CAA9B;AACA,QAAM,CAACC,MAAD,EAASC,OAAT,IAAoBzB,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAAC0B,UAAD,EAAaC,aAAb,IAA8B3B,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAACD,SAAD,EAAY6B,YAAZ,IAA4B5B,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAAC6B,iBAAD,EAAoBC,oBAApB,IAA4C9B,QAAQ,CAAC,EAAD,CAA1D;AACA,QAAM,CAAC+B,OAAD,EAAUC,UAAV,IAAwBhC,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACuB,IAAD,EAAOU,OAAP,IAAkBjC,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACkC,KAAD,EAAQC,QAAR,IAAoBnC,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACoC,OAAD,EAAUC,cAAV,IAA4BrC,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACsC,OAAD,EAAUC,UAAV,IAAwBvC,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAACwC,SAAD,EAAYC,YAAZ,IAA4BzC,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAC0C,YAAD,EAAeC,eAAf,IAAkC3C,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAACsB,OAAD,EAAUsB,UAAV,IAAwB5C,QAAQ,CAAC,QAAD,CAAtC;AACA,QAAM,CAAC6C,KAAD,EAAQC,QAAR,IAAoB9C,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM+C,UAAU,GAAG,CAAC,MAAD,EAAS,MAAT,EAAiB,KAAjB,CAAnB;AAEA,QAAMC,OAAO,GAAG,CAAC,SAAD,EAAY,UAAZ,CAAhB;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBlD,QAAQ,CAAC,SAAD,CAAhC;AACAmD,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuB9B,OAAvB;AAEA,QAAM+B,UAAU,GAAGpD,OAAO,CAAC,MAAMH,MAAP,EAAe,EAAf,CAA1B;AACAS,EAAAA,SAAS,CAAC,YAAY;AAClBkB,IAAAA,OAAO,CAAC,KAAD,CAAP;AACA,QAAI6B,WAAJ;AACAA,IAAAA,WAAW,GAAG,MAAM9C,KAAK,CAAC+C,GAAN,CAAU,iCAAV,CAApB;AACAD,IAAAA,WAAW,GAAGA,WAAW,CAACE,IAAZ,CAAiBzD,SAA/B;AACA6B,IAAAA,YAAY,CAAC0B,WAAD,CAAZ;AACA3B,IAAAA,aAAa,CAAC2B,WAAW,CAACG,GAAZ,CAAgBC,EAAE,IAAIA,EAAE,CAACnC,IAAzB,CAAD,CAAb;AACAE,IAAAA,OAAO,CAAC,IAAD,CAAP;AACA0B,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBrD,SAAzB;AACH,GATQ,EASN,CAACA,SAAS,CAAC4D,MAAX,CATM,CAAT;AAWApD,EAAAA,SAAS,CAAC,YAAY;AAClB,QAAIR,SAAS,IAAI6D,SAAb,IAA0B7D,SAAS,CAAC4D,MAAxC,EAAgD;AAC5CR,MAAAA,OAAO,CAACC,GAAR,CAAY,gBAAZ,EAA8BrD,SAA9B;AACA6B,MAAAA,YAAY,CAACiC,IAAI,IAAI;AACjBA,QAAAA,IAAI,CAACJ,GAAL,CAASK,CAAC,IAAI;AACVA,UAAAA,CAAC,CAACC,EAAF,GAAOD,CAAC,CAACC,EAAF,CAAKd,IAAL,EAAP;AACA,iBAAOa,CAAP;AACH,SAHD;AAIA,eAAOD,IAAP;AACH,OANW,CAAZ;AAQAV,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BrD,SAA5B;AACA0B,MAAAA,OAAO,CAAC,KAAD,CAAP;AACAA,MAAAA,OAAO,CAAC,IAAD,CAAP;AACH;AAEJ,GAhBQ,EAgBN,CAACwB,IAAD,CAhBM,CAAT,CA9CgC,CA+DhC;AACA;AACA;;AACA,QAAMe,OAAO,GAAG,CAACC,IAAD,EAAO1C,IAAP,KAAgB;AAC5B4B,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoB7B,IAApB;AACAS,IAAAA,UAAU,CAAE,oCAAmCT,IAAK,EAA1C,CAAV;AACAgB,IAAAA,UAAU,CAAC0B,IAAD,CAAV;AAEH,GALD;;AAOA,QAAMC,WAAW,GAAIC,CAAD,IAAO;AACvB9C,IAAAA,MAAM,CAACwC,IAAI,IAAI;AACX,aAAO,EAAE,GAAGA,IAAL;AAAWtC,QAAAA,IAAI,EAAE4C,CAAC,CAACC,MAAF,CAASC;AAA1B,OAAP;AACH,KAFK,CAAN;AAGH,GAJD;;AAMA,QAAMC,QAAQ,GAAG,MAAO/C,IAAP,IAAgB;AAC7B4B,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACC,QAAImB,GAAG,GAAG,CAAC,MAAM/D,KAAK,CAAC+C,GAAN,CAAW,oCAAmChC,IAAK,EAAnD,CAAP,EAA8DiC,IAAxE;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBmB,GAAnB;AACA,WAAOA,GAAP;AACJ,GALD;;AAOA,QAAMC,SAAS,GAAG,MAAOjD,IAAP,IAAgB;AAC9B4B,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoB7B,IAApB;AACAkB,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAR,IAAAA,OAAO,CAACV,IAAD,CAAP;AACA,QAAIsB,KAAK,GAAG,CAAC,MAAMrC,KAAK,CAAC+C,GAAN,CAAW,mCAAkChC,IAAK,EAAlD,CAAP,EAA6DiC,IAAzE,CAJ8B,CAK9B;;AACAV,IAAAA,QAAQ,CAACD,KAAD,CAAR;AACH,GAPD;;AASA,QAAM4B,OAAO,GAAG,MAAM;AAClB9B,IAAAA,eAAe,CAAC,IAAD,CAAf;AACH,GAFD;;AAIA,QAAM+B,GAAG,GAAG,MAAM;AACdvB,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBhB,OAApB;AACA,UAAMoB,IAAI,GAAG,IAAImB,QAAJ,EAAb;AACAnB,IAAAA,IAAI,CAACoB,MAAL,CAAY,MAAZ,EAAoBxC,OAApB,EAHc,CAId;;AACA,QAAIyC,GAAG,GAAGC,GAAG,CAACC,eAAJ,CAAoB3C,OAApB,CAAV;AACAe,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmByB,GAAnB;AACArE,IAAAA,KAAK,CAACwE,IAAN,CAAW,8BAAX,EAA2CxB,IAA3C,EAAiD;AAC7CyB,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX;AADoC,KAAjD;AAMH,GAbD;;AAcA,SACIzD,MAAM,gBACF;AAAK,IAAA,SAAS,EAAEX,EAAE,CAACE,SAAnB;AAAA,4BACI,QAAC,UAAD;AAAY,MAAA,IAAI,EAAC;AAAjB;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAA,8BACI;AAAK,QAAA,KAAK,EAAE;AAACmE,UAAAA,OAAO,EAAE,MAAV;AAAkBC,UAAAA,aAAa,EAAE,KAAjC;AAAwCC,UAAAA,cAAc,EAAE;AAAxD,SAAZ;AAAA,kBAEIvD,iBAAiB,CAAC8B,MAAlB,GAEI9B,iBAAiB,CAAC4B,GAAlB,CAAsB4B,KAAK,IAAI;AAC/B,8BACI,QAAC,SAAD;AACI,YAAA,KAAK,EAAE;AAACC,cAAAA,KAAK,EAAE;AAAR,aADX;AAEI,YAAA,MAAM,EAAED,KAAK,CAAC9D,IAFlB;AAGI,YAAA,IAAI,EAAE8D,KAAK,CAACtB,EAHhB;AAII,YAAA,MAAM,EAAE,CAACE,IAAD,EAAO1C,IAAP,KAAgByC,OAAO,CAACC,IAAD,EAAO1C,IAAP,CAJnC;AAKI,YAAA,KAAK,EAAE,CAAC0C,IAAD,EAAO1C,IAAP,KAAgByC,OAAO,CAACC,IAAD,EAAO1C,IAAP,CALlC;AAMI,YAAA,OAAO,EAAGA,IAAD,IAAUiD,SAAS,CAACjD,IAAD,CANhC;AAOI,YAAA,QAAQ,EAAE;AAPd;AAAA;AAAA;AAAA;AAAA,kBADJ;AAYH,SAbG,CAFJ,gBAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AApBJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAwBI;AAAK,QAAA,KAAK,EAAE;AAAC2D,UAAAA,OAAO,EAAE,MAAV;AAAkBC,UAAAA,aAAa,EAAE;AAAjC,SAAZ;AAAA,gCACI,QAAC,MAAD;AAAQ,UAAA,KAAK,EAAE;AAACI,YAAAA,MAAM,EAAE;AAAT,WAAf;AAAiC,UAAA,OAAO,EAAEd,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI,QAAC,cAAD;AACI,UAAA,KAAK,EAAE;AAACc,YAAAA,MAAM,EAAE;AAAT,WADX;AAEI,UAAA,KAAK,EAAEtC,IAFX;AAGI,UAAA,QAAQ,EAAEkB,CAAC,IAAIjB,OAAO,CAACiB,CAAD,CAH1B;AAAA,oBAMInB,OAAO,CAACS,GAAR,CAAYC,EAAE,iBACV,QAAC,QAAD,CAAU,IAAV;AAEI,YAAA,QAAQ,EAAEA,EAFd;AAAA,sBAIKA;AAJL,aACSA,EADT;AAAA;AAAA;AAAA;AAAA,kBADJ;AANJ;AAAA;AAAA;AAAA;AAAA,gBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAxBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eA+CQ;AAAK,MAAA,KAAK,EAAE;AAACwB,QAAAA,OAAO,EAAE5C,OAAO,GAAG,MAAH,GAAY;AAA7B,OAAZ;AAAA,6BACI,QAAC,KAAD;AAAO,QAAA,GAAG,EAAEP,OAAZ;AAAqB,QAAA,KAAK,EAAE;AAACuD,UAAAA,KAAK,EAAE,OAAR;AAAiBE,UAAAA,MAAM,EAAE;AAAzB;AAA5B;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YA/CR,eAkDQ,QAAC,KAAD;AACI,MAAA,IAAI,EAAIhD,SADZ;AAEI,MAAA,MAAM,EAAE,MAAMC,YAAY,CAAC,KAAD,CAF9B;AAGI,MAAA,QAAQ,EAAE,UAHd;AAII,MAAA,QAAQ,EAAI,KAJhB;AAAA,8BAMI,QAAE,KAAF,CAAQ,MAAR;AAAe,QAAA,WAAW,MAA1B;AAAA,+BACA,QAAE,KAAF,CAAQ,KAAR;AAAA,0BAAiBlB,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cANJ,eASI,QAAE,KAAF,CAAQ,IAAR;AAAA,gCACI,QAAC,UAAD;AACI,UAAA,MAAM,EAAEA,IADZ;AAEI,UAAA,IAAI,EAAEsB;AAFV;AAAA;AAAA;AAAA;AAAA,gBADJ,eAKI,QAAC,KAAD;AAAO,UAAA,GAAG,EAAEd,OAAZ;AAAqB,UAAA,KAAK,EAAE;AAACuD,YAAAA,KAAK,EAAE,OAAR;AAAiBE,YAAAA,MAAM,EAAE,OAAzB;AAAkCD,YAAAA,MAAM,EAAE;AAA1C;AAA5B;AAAA;AAAA;AAAA;AAAA,gBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,cATJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAlDR,eAoEQ,QAAC,QAAD;AACI,MAAA,IAAI,EAAE7C,YADV;AAEI,MAAA,OAAO,EAAEC,eAFb;AAGI,MAAA,OAAO,EAAEC,UAHb;AAII,MAAA,IAAI,EAAEtB,OAJV;AAKI,MAAA,KAAK,EAAC,kDALV;AAMI,MAAA,SAAS,EAAEI,UANf;AAOI,MAAA,IAAI,EAAEH,IAPV;AAQI,MAAA,OAAO,EAAEU,OARb;AASI,MAAA,KAAK,EAAEC,KATX;AAUI,MAAA,QAAQ,EAAEC,QAVd;AAWI,MAAA,cAAc,EAAEE,cAXpB;AAYI,MAAA,OAAO,EAAED,OAZb;AAaI,MAAA,GAAG,EAAEsC;AAbT;AAAA;AAAA;AAAA;AAAA,YApER;AAAA;AAAA;AAAA;AAAA;AAAA,UADE,gBAsFF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAvFR;AA4FH,CA7MM;;GAAM3D,S;;KAAAA,S","sourcesContent":["import { useSelector } from 'react-redux';\nimport {Header} from '../ui-components/Header'\n// import cl from '../../../styles/Info.module.css';\nimport { countries } from '../dataBase/countries';\nimport { useState, useMemo } from 'react';\n// import Image from '../../ui-components/Image';\nimport { Container, DropdownButton, Dropdown, Image } from 'react-bootstrap';\nimport fs from 'fs';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport { TableComp } from '../ui-components/TableComp';\nimport { TableChars } from '../ui-components/TableChars';\nimport { Modal, Button } from 'react-bootstrap';\n//const fetch = require('node-fetch');\nimport cl from '../../styles/Countries.module.css'\nimport { AddModal } from '../modals/AddModal';\nexport const Countries = (props) => {\n\n    //let arr = countries;\n    // let jsx = '';\n    // for (let el of arr)\n    // {\n    //     let fields = el.to;\n    //     jsx += <p>{el.name}</p>\n    //     for (let fi of fields)\n    //         jsx += <li>{fi}</li>\n    // }\n    \n    let init = []\n    const [body, setBody] = useState(init);\n    const [str, setStr] = useState({ country: 'Россия', name: '' });\n    const [isload, setLoad] = useState(false);\n    const [countNames, setCountNames] = useState([]);\n    const [countries, setCountries] = useState({});\n    const [filteredCountries, setFilteredCountries] = useState({});\n    const [urlName, setUrlName] = useState('');\n    const [name, setName] = useState('');\n    const [fname, setFname] = useState('');\n    const [capture, setCaptureFile] = useState({});\n    const [visible, setVisible] = useState(false);\n    const [showModal, setShowModal] = useState(false);\n    const [showAddModal, setShowAddModal] = useState(false);\n    const [country, setCountry] = useState('Россия')\n    const [chars, setChars] = useState({});\n    const bodyStatic = ['Зига', \"Твой\", \"Дом\"];\n\n    const sortArr = [\"По дате\", 'По имени'];\n    const [sort, setSort] = useState('По дате')\n    console.log('country', country);\n\n    const HeaderMemo = useMemo(() => Header, [])\n    useEffect(async () => {\n        setLoad(false);\n        let fetchCounts;\n        fetchCounts = await axios.get('http://localhost:5000/countries');\n        fetchCounts = fetchCounts.data.countries;\n        setCountries(fetchCounts);\n        setCountNames(fetchCounts.map(el => el.name));\n        setLoad(true);\n        console.log('countries', countries);\n    }, [countries.length]);\n\n    useEffect(async () => {\n        if (countries != undefined && countries.length) {\n            console.log('beforefiltered', countries);\n            setCountries(prev => {\n                prev.map(c => {\n                    c.to = c.to.sort();\n                    return c;\n                });\n                return prev;\n            }\n            )\n            console.log('filtercounts', countries)\n            setLoad(false);\n            setLoad(true);\n        }\n\n    }, [sort])\n    //console.log(jsx)                 {\n    //                 countNames.map(el => <option>{el}</option>)\n    //                }\n    const showPic = (flag, name) => {\n        console.log('name', name);\n        setUrlName(`http://localhost:5000/image?name=${name}`);\n        setVisible(flag);\n        \n    }\n\n    const setNameFunc = (e) => {\n        setStr(prev => {\n            return { ...prev, name: e.target.value };\n        })\n    }\n\n    const getImage = async (name) => {\n        console.log('infunc');\n         let img = (await axios.get(`http://localhost:5000/image?name=${name}`)).data;\n         console.log('img', img);\n         return img;\n    }\n\n    const openModal = async (name) => {\n        console.log('aame', name);\n        setShowModal(true);\n        setName(name);\n        let chars = (await axios.get(`http://localhost:5000/info?name=${name}`)).data;\n        //console.log('chars', chars);\n        setChars(chars);\n    }\n\n    const addNote = () => {\n        setShowAddModal(true);\n    }\n\n    const add = () => {\n        console.log('capt', capture);\n        const data = new FormData();\n        data.append('file', capture);\n        //capture.map(dat => URL.createObjectURL(dat));\n        let url = URL.createObjectURL(capture);\n        console.log('url', url);\n        axios.post('http://localhost:5000/upload', data, {\n            headers: {\n                \"Content-type\": \"form/multipart\"\n            }\n        });\n\n    }\n    return (\n        isload ?\n            <div className={cl.Countries}>\n                <HeaderMemo name=\"Страны лидеры по производству БПЛА\" />\n                <div>\n                    <div style={{display: 'flex', flexDirection: 'row', justifyContent: 'space-between'}}>\n                        {\n                        filteredCountries.length ?\n                        (\n                            filteredCountries.map(count => {\n                            return (\n                                <TableComp\n                                    style={{width: '30px'}}\n                                    header={count.name}\n                                    body={count.to}\n                                    onOver={(flag, name) => showPic(flag, name)}\n                                    onOut={(flag, name) => showPic(flag, name)}\n                                    onClick={(name) => openModal(name)}\n                                    propFlag={true}\n                                />\n                            )\n\n                        })\n                        )\n                        :\n                        <p>Ждите</p>\n                        }\n                    </div>\n                    <div style={{display: 'flex', flexDirection: 'row'}}>\n                        <Button style={{margin: '10px'}} onClick={addNote}>+</Button>\n                        <DropdownButton\n                            style={{margin: '10px'}}\n                            title={sort}\n                            onSelect={e => setSort(e)}\n                        >\n                        {\n                            sortArr.map(el =>\n                                <Dropdown.Item\n                                    key={el}\n                                    eventKey={el}\n                                >\n                                    {el}\n                                </Dropdown.Item>\n                                )\n                        }\n                        </DropdownButton>\n                    </div>\n                    \n                </div>\n                    <div style={{display: visible ? 'flex' : 'none'}}>\n                        <Image src={urlName} style={{width: '320px', height: '240px'}} />\n                    </div>\n                    <Modal\n                        show ={ showModal }\n                        onHide={() => setShowModal(false)}\n                        backdrop =\" static \"\n                        keyboard ={ false }\n                    >\n                        < Modal.Header closeButton >\n                        < Modal.Title > {name}</ Modal.Title >\n                        </ Modal.Header >\n                        < Modal.Body >\n                            <TableChars\n                                header={name}\n                                body={chars}\n                            />\n                            <Image src={urlName} style={{width: '320px', height: '240px', margin: '10px'}} />\n                        </Modal.Body >\n                    </ Modal >\n\n                    <AddModal\n                        show={showAddModal}\n                        setShow={setShowAddModal}\n                        setItem={setCountry}\n                        item={country}\n                        title=\"Добавить\"\n                        countries={countNames}\n                        name={name}\n                        setName={setName}\n                        fname={fname}\n                        setFname={setFname}\n                        setCaptureFile={setCaptureFile}\n                        capture={capture}\n                        add={add}\n                    />\n            </div>\n            :\n            <div>\n                Падажжи\n            </div>\n            \n    );\n}\n"]},"metadata":{},"sourceType":"module"}