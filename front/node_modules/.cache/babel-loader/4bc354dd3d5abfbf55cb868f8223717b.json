{"ast":null,"code":"var _jsxFileName = \"/home/operator3/\\u0414\\u043E\\u043A\\u0443\\u043C\\u0435\\u043D\\u0442\\u044B/newBD/front/src/components/pages/Countries.jsx\",\n    _s = $RefreshSig$();\n\nimport { useSelector } from 'react-redux';\nimport { Header } from '../ui-components/Header'; // import cl from '../../../styles/Info.module.css';\n\nimport { useState, useMemo } from 'react'; // import Image from '../../ui-components/Image';\n\nimport { Container, DropdownButton, Dropdown, Image, Pagination } from 'react-bootstrap';\nimport fs from 'fs';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport { TableComp } from '../ui-components/TableComp';\nimport { TableChars } from '../ui-components/TableChars';\nimport { Modal, Button } from 'react-bootstrap'; //const fetch = require('node-fetch');\n\nimport cl from '../../styles/Countries.module.css';\nimport { AddModal } from '../modals/AddModal';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const Countries = props => {\n  _s();\n\n  //let arr = countries;\n  // let jsx = '';\n  // for (let el of arr)\n  // {\n  //     let fields = el.to;\n  //     jsx += <p>{el.name}</p>\n  //     for (let fi of fields)\n  //         jsx += <li>{fi}</li>\n  // }\n  let init = [];\n  const [body, setBody] = useState(init);\n  const [str, setStr] = useState({\n    country: 'Россия',\n    name: ''\n  });\n  const [isload, setLoad] = useState(false);\n  const [countNames, setCountNames] = useState([]);\n  const [countries, setCountries] = useState({});\n  const [filteredCountries, setFilteredCountries] = useState({});\n  const [urlName, setUrlName] = useState('');\n  const [name, setName] = useState('');\n  const [fname, setFname] = useState('');\n  const [capture, setCaptureFile] = useState({});\n  const [visible, setVisible] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [country, setCountry] = useState('Россия');\n  const [chars, setChars] = useState({});\n  const bodyStatic = ['Зига', \"Твой\", \"Дом\"];\n  const sortArr = [\"По дате\", 'По имени'];\n  const [sort, setSort] = useState('По дате');\n  console.log('country', countries);\n  const HeaderMemo = useMemo(() => Header, []);\n  useEffect(async () => {\n    setLoad(false);\n    let fetchCounts;\n    fetchCounts = await axios.get('http://localhost:5000/countries');\n    fetchCounts = fetchCounts.data.countries;\n    setCountries([...fetchCounts]);\n    setFilteredCountries([...fetchCounts]);\n    setCountNames(fetchCounts.map(el => el.name));\n    setLoad(true);\n    console.log('countries', countries);\n  }, [countries.length]);\n  useEffect(async () => {\n    if (countries != undefined && countries.length) {\n      console.log('Сработал');\n      const cou = {\n        \"name\": \"США\",\n        \"to\": [\"RQ-11 Raven\", \"Wasp III\", \"RQ-20 Puma\", \"RQ-16 T-Hawk\", \"MQ-9 Reaper\", \"RQ-4 Global Hawk\", \"RQ-170 Sentinel\"]\n      };\n      console.log('defcountriesbef', countries);\n\n      if (sort == 'По имени') {\n        //ИЗМЕНЯЕТ ИСХОДНЫЙ countries\n        setFilteredCountries(() => {\n          let filcounts = filteredCountries;\n          filcounts.map(c => {\n            c.to = c.to.sort();\n            return c;\n          });\n          return filcounts;\n        }); //ИЗМЕНЯЕТ ИСХОДНЫЙ countries\n        // setFilteredCountries(prev => {\n        //     prev.map(c => {\n        //         c.to = c.to.sort();\n        //         return c;\n        //     });\n        //     return prev;\n        // })\n        //setFilteredCountries([...filteredCountries, cou]);\n\n        console.log('По имени', countries, filteredCountries);\n      } else {\n        setFilteredCountries([...countries]);\n        console.log('По дате', countries, filteredCountries);\n      }\n\n      console.log('defcountries', countries);\n      console.log('filteted', filteredCountries);\n    }\n  }, [sort]); //console.log(jsx)                 {\n  //                 countNames.map(el => <option>{el}</option>)\n  //                }\n\n  const showPic = (flag, name) => {\n    setUrlName(`http://localhost:5000/image?name=${name}`);\n    setVisible(flag);\n  };\n\n  const setNameFunc = e => {\n    setStr(prev => {\n      return { ...prev,\n        name: e.target.value\n      };\n    });\n  };\n\n  const getImage = async name => {\n    console.log('infunc');\n    let img = (await axios.get(`http://localhost:5000/image?name=${name}`)).data;\n    console.log('img', img);\n    return img;\n  };\n\n  const openModal = async name => {\n    console.log('aame', name);\n    setShowModal(true);\n    setName(name);\n    let chars = (await axios.get(`http://localhost:5000/info?name=${name}`)).data; //console.log('chars', chars);\n\n    setChars(chars);\n  };\n\n  const addNote = () => {\n    setShowAddModal(true);\n  };\n\n  const add = () => {\n    console.log('capt', capture);\n    const data = new FormData();\n    data.append('file', capture); //capture.map(dat => URL.createObjectURL(dat));\n\n    let url = URL.createObjectURL(capture);\n    console.log('url', url);\n    axios.post('http://localhost:5000/upload', data, {\n      headers: {\n        \"Content-type\": \"form/multipart\"\n      }\n    });\n  };\n\n  return isload ? /*#__PURE__*/_jsxDEV(\"div\", {\n    className: cl.Countries,\n    children: [/*#__PURE__*/_jsxDEV(HeaderMemo, {\n      name: \"\\u0421\\u0442\\u0440\\u0430\\u043D\\u044B \\u043B\\u0438\\u0434\\u0435\\u0440\\u044B \\u043F\\u043E \\u043F\\u0440\\u043E\\u0438\\u0437\\u0432\\u043E\\u0434\\u0441\\u0442\\u0432\\u0443 \\u0411\\u041F\\u041B\\u0410\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row',\n          justifyContent: 'space-between'\n        },\n        children: filteredCountries.length ? filteredCountries.map(count => {\n          return /*#__PURE__*/_jsxDEV(TableComp, {\n            style: {\n              width: '30px'\n            },\n            header: count.name,\n            body: count.to,\n            onOver: (flag, name) => showPic(flag, name),\n            onOut: (flag, name) => showPic(flag, name),\n            onClick: name => openModal(name),\n            propFlag: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 33\n          }, this);\n        }) : /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"\\u0416\\u0434\\u0438\\u0442\\u0435\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          display: 'flex',\n          flexDirection: 'row'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(Button, {\n            style: {\n              margin: '10px'\n            },\n            onClick: addNote,\n            children: \"+\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            marginLeft: '20px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              display: 'flex',\n              justifyContent: 'center',\n              alignItems: 'center',\n              color: 'white'\n            },\n            children: \"\\u0421\\u043E\\u0440\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C \\u043F\\u043E\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(DropdownButton, {\n            style: {\n              margin: '10px'\n            },\n            title: sort,\n            onSelect: e => setSort(e),\n            children: sortArr.map(el => /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n              eventKey: el,\n              children: el\n            }, el, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n            children: [/*#__PURE__*/_jsxDEV(Pagination.Item, {\n              children: 1\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 225,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(Pagination.Item, {\n              children: 2\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 224,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: visible ? 'flex' : 'none'\n      },\n      children: /*#__PURE__*/_jsxDEV(Image, {\n        src: urlName,\n        style: {\n          width: '320px',\n          height: '240px'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 25\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: showModal,\n      onHide: () => setShowModal(false),\n      backdrop: \" static \",\n      keyboard: false,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: [\" \", name]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: [/*#__PURE__*/_jsxDEV(TableChars, {\n          header: name,\n          body: chars\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 29\n        }, this), /*#__PURE__*/_jsxDEV(Image, {\n          src: urlName,\n          style: {\n            width: '320px',\n            height: '240px',\n            margin: '10px'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 25\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 21\n    }, this), /*#__PURE__*/_jsxDEV(AddModal, {\n      show: showAddModal,\n      setShow: setShowAddModal,\n      setItem: setCountry,\n      item: country,\n      title: \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\",\n      countries: countNames,\n      name: name,\n      setName: setName,\n      fname: fname,\n      setFname: setFname,\n      setCaptureFile: setCaptureFile,\n      capture: capture,\n      add: add\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 21\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 172,\n    columnNumber: 13\n  }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u041F\\u0430\\u0434\\u0430\\u0436\\u0436\\u0438\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 271,\n    columnNumber: 13\n  }, this);\n};\n\n_s(Countries, \"+YCFH+oMunIyGeBmxks9z9SdsWE=\");\n\n_c = Countries;\n\nvar _c;\n\n$RefreshReg$(_c, \"Countries\");","map":{"version":3,"sources":["/home/operator3/Документы/newBD/front/src/components/pages/Countries.jsx"],"names":["useSelector","Header","useState","useMemo","Container","DropdownButton","Dropdown","Image","Pagination","fs","useEffect","axios","TableComp","TableChars","Modal","Button","cl","AddModal","Countries","props","init","body","setBody","str","setStr","country","name","isload","setLoad","countNames","setCountNames","countries","setCountries","filteredCountries","setFilteredCountries","urlName","setUrlName","setName","fname","setFname","capture","setCaptureFile","visible","setVisible","showModal","setShowModal","showAddModal","setShowAddModal","setCountry","chars","setChars","bodyStatic","sortArr","sort","setSort","console","log","HeaderMemo","fetchCounts","get","data","map","el","length","undefined","cou","filcounts","c","to","showPic","flag","setNameFunc","e","prev","target","value","getImage","img","openModal","addNote","add","FormData","append","url","URL","createObjectURL","post","headers","display","flexDirection","justifyContent","count","width","margin","marginLeft","alignItems","color","height"],"mappings":";;;AAAA,SAASA,WAAT,QAA4B,aAA5B;AACA,SAAQC,MAAR,QAAqB,yBAArB,C,CACA;;AAEA,SAASC,QAAT,EAAmBC,OAAnB,QAAkC,OAAlC,C,CACA;;AACA,SAASC,SAAT,EAAoBC,cAApB,EAAoCC,QAApC,EAA8CC,KAA9C,EAAqDC,UAArD,QAAuE,iBAAvE;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,SAASC,SAAT,QAA0B,OAA1B;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,4BAA1B;AACA,SAASC,UAAT,QAA2B,6BAA3B;AACA,SAASC,KAAT,EAAgBC,MAAhB,QAA8B,iBAA9B,C,CACA;;AACA,OAAOC,EAAP,MAAe,mCAAf;AACA,SAASC,QAAT,QAAyB,oBAAzB;;AACA,OAAO,MAAMC,SAAS,GAAIC,KAAD,IAAW;AAAA;;AAEhC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA,MAAIC,IAAI,GAAG,EAAX;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBpB,QAAQ,CAACkB,IAAD,CAAhC;AACA,QAAM,CAACG,GAAD,EAAMC,MAAN,IAAgBtB,QAAQ,CAAC;AAAEuB,IAAAA,OAAO,EAAE,QAAX;AAAqBC,IAAAA,IAAI,EAAE;AAA3B,GAAD,CAA9B;AACA,QAAM,CAACC,MAAD,EAASC,OAAT,IAAoB1B,QAAQ,CAAC,KAAD,CAAlC;AACA,QAAM,CAAC2B,UAAD,EAAaC,aAAb,IAA8B5B,QAAQ,CAAC,EAAD,CAA5C;AACA,QAAM,CAAC6B,SAAD,EAAYC,YAAZ,IAA4B9B,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAAC+B,iBAAD,EAAoBC,oBAApB,IAA4ChC,QAAQ,CAAC,EAAD,CAA1D;AACA,QAAM,CAACiC,OAAD,EAAUC,UAAV,IAAwBlC,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACwB,IAAD,EAAOW,OAAP,IAAkBnC,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACoC,KAAD,EAAQC,QAAR,IAAoBrC,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAM,CAACsC,OAAD,EAAUC,cAAV,IAA4BvC,QAAQ,CAAC,EAAD,CAA1C;AACA,QAAM,CAACwC,OAAD,EAAUC,UAAV,IAAwBzC,QAAQ,CAAC,KAAD,CAAtC;AACA,QAAM,CAAC0C,SAAD,EAAYC,YAAZ,IAA4B3C,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAAC4C,YAAD,EAAeC,eAAf,IAAkC7C,QAAQ,CAAC,KAAD,CAAhD;AACA,QAAM,CAACuB,OAAD,EAAUuB,UAAV,IAAwB9C,QAAQ,CAAC,QAAD,CAAtC;AACA,QAAM,CAAC+C,KAAD,EAAQC,QAAR,IAAoBhD,QAAQ,CAAC,EAAD,CAAlC;AACA,QAAMiD,UAAU,GAAG,CAAC,MAAD,EAAS,MAAT,EAAiB,KAAjB,CAAnB;AAEA,QAAMC,OAAO,GAAG,CAAC,SAAD,EAAY,UAAZ,CAAhB;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBpD,QAAQ,CAAC,SAAD,CAAhC;AACAqD,EAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBzB,SAAvB;AAEA,QAAM0B,UAAU,GAAGtD,OAAO,CAAC,MAAMF,MAAP,EAAe,EAAf,CAA1B;AACAS,EAAAA,SAAS,CAAC,YAAY;AAClBkB,IAAAA,OAAO,CAAC,KAAD,CAAP;AACA,QAAI8B,WAAJ;AACAA,IAAAA,WAAW,GAAG,MAAM/C,KAAK,CAACgD,GAAN,CAAU,iCAAV,CAApB;AACAD,IAAAA,WAAW,GAAGA,WAAW,CAACE,IAAZ,CAAiB7B,SAA/B;AACAC,IAAAA,YAAY,CAAC,CAAC,GAAG0B,WAAJ,CAAD,CAAZ;AACAxB,IAAAA,oBAAoB,CAAC,CAAC,GAAGwB,WAAJ,CAAD,CAApB;AACA5B,IAAAA,aAAa,CAAC4B,WAAW,CAACG,GAAZ,CAAgBC,EAAE,IAAIA,EAAE,CAACpC,IAAzB,CAAD,CAAb;AACAE,IAAAA,OAAO,CAAC,IAAD,CAAP;AACA2B,IAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ,EAAyBzB,SAAzB;AACH,GAVQ,EAUN,CAACA,SAAS,CAACgC,MAAX,CAVM,CAAT;AAYArD,EAAAA,SAAS,CAAC,YAAY;AAClB,QAAIqB,SAAS,IAAIiC,SAAb,IAA0BjC,SAAS,CAACgC,MAAxC,EAAgD;AAC5CR,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACA,YAAMS,GAAG,GAAG;AACR,gBAAQ,KADA;AAER,cAAM,CACI,aADJ,EAEI,UAFJ,EAGI,YAHJ,EAII,cAJJ,EAKI,aALJ,EAMI,kBANJ,EAOI,iBAPJ;AAFE,OAAZ;AAYAV,MAAAA,OAAO,CAACC,GAAR,CAAY,iBAAZ,EAA+BzB,SAA/B;;AACA,UAAIsB,IAAI,IAAI,UAAZ,EAAwB;AAGpB;AACAnB,QAAAA,oBAAoB,CAAC,MAAM;AACvB,cAAIgC,SAAS,GAAGjC,iBAAhB;AACAiC,UAAAA,SAAS,CAACL,GAAV,CAAcM,CAAC,IAAI;AACXA,YAAAA,CAAC,CAACC,EAAF,GAAOD,CAAC,CAACC,EAAF,CAAKf,IAAL,EAAP;AACA,mBAAOc,CAAP;AACH,WAHL;AAIA,iBAAOD,SAAP;AACH,SAPmB,CAApB,CAJoB,CAapB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAIA;;AAEAX,QAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBzB,SAAxB,EAAmCE,iBAAnC;AAEH,OA5BD,MA8BK;AACDC,QAAAA,oBAAoB,CAAC,CAAC,GAAGH,SAAJ,CAAD,CAApB;AACAwB,QAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBzB,SAAvB,EAAkCE,iBAAlC;AACH;;AAEDsB,MAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ,EAA4BzB,SAA5B;AACAwB,MAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ,EAAwBvB,iBAAxB;AAEH;AAEJ,GAxDQ,EAwDN,CAACoB,IAAD,CAxDM,CAAT,CA/CgC,CAwGhC;AACA;AACA;;AACA,QAAMgB,OAAO,GAAG,CAACC,IAAD,EAAO5C,IAAP,KAAgB;AAC5BU,IAAAA,UAAU,CAAE,oCAAmCV,IAAK,EAA1C,CAAV;AACAiB,IAAAA,UAAU,CAAC2B,IAAD,CAAV;AAEH,GAJD;;AAMA,QAAMC,WAAW,GAAIC,CAAD,IAAO;AACvBhD,IAAAA,MAAM,CAACiD,IAAI,IAAI;AACX,aAAO,EAAE,GAAGA,IAAL;AAAW/C,QAAAA,IAAI,EAAE8C,CAAC,CAACE,MAAF,CAASC;AAA1B,OAAP;AACH,KAFK,CAAN;AAGH,GAJD;;AAMA,QAAMC,QAAQ,GAAG,MAAOlD,IAAP,IAAgB;AAC7B6B,IAAAA,OAAO,CAACC,GAAR,CAAY,QAAZ;AACC,QAAIqB,GAAG,GAAG,CAAC,MAAMlE,KAAK,CAACgD,GAAN,CAAW,oCAAmCjC,IAAK,EAAnD,CAAP,EAA8DkC,IAAxE;AACAL,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmBqB,GAAnB;AACA,WAAOA,GAAP;AACJ,GALD;;AAOA,QAAMC,SAAS,GAAG,MAAOpD,IAAP,IAAgB;AAC9B6B,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoB9B,IAApB;AACAmB,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACAR,IAAAA,OAAO,CAACX,IAAD,CAAP;AACA,QAAIuB,KAAK,GAAG,CAAC,MAAMtC,KAAK,CAACgD,GAAN,CAAW,mCAAkCjC,IAAK,EAAlD,CAAP,EAA6DkC,IAAzE,CAJ8B,CAK9B;;AACAV,IAAAA,QAAQ,CAACD,KAAD,CAAR;AACH,GAPD;;AASA,QAAM8B,OAAO,GAAG,MAAM;AAClBhC,IAAAA,eAAe,CAAC,IAAD,CAAf;AACH,GAFD;;AAIA,QAAMiC,GAAG,GAAG,MAAM;AACdzB,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBhB,OAApB;AACA,UAAMoB,IAAI,GAAG,IAAIqB,QAAJ,EAAb;AACArB,IAAAA,IAAI,CAACsB,MAAL,CAAY,MAAZ,EAAoB1C,OAApB,EAHc,CAId;;AACA,QAAI2C,GAAG,GAAGC,GAAG,CAACC,eAAJ,CAAoB7C,OAApB,CAAV;AACAe,IAAAA,OAAO,CAACC,GAAR,CAAY,KAAZ,EAAmB2B,GAAnB;AACAxE,IAAAA,KAAK,CAAC2E,IAAN,CAAW,8BAAX,EAA2C1B,IAA3C,EAAiD;AAC7C2B,MAAAA,OAAO,EAAE;AACL,wBAAgB;AADX;AADoC,KAAjD;AAMH,GAbD;;AAcA,SACI5D,MAAM,gBACF;AAAK,IAAA,SAAS,EAAEX,EAAE,CAACE,SAAnB;AAAA,4BACI,QAAC,UAAD;AAAY,MAAA,IAAI,EAAC;AAAjB;AAAA;AAAA;AAAA;AAAA,YADJ,eAEI;AAAA,8BACI;AAAK,QAAA,KAAK,EAAE;AAACsE,UAAAA,OAAO,EAAE,MAAV;AAAkBC,UAAAA,aAAa,EAAE,KAAjC;AAAwCC,UAAAA,cAAc,EAAE;AAAxD,SAAZ;AAAA,kBAEIzD,iBAAiB,CAAC8B,MAAlB,GAEI9B,iBAAiB,CAAC4B,GAAlB,CAAsB8B,KAAK,IAAI;AAC/B,8BACI,QAAC,SAAD;AACI,YAAA,KAAK,EAAE;AAACC,cAAAA,KAAK,EAAE;AAAR,aADX;AAEI,YAAA,MAAM,EAAED,KAAK,CAACjE,IAFlB;AAGI,YAAA,IAAI,EAAEiE,KAAK,CAACvB,EAHhB;AAII,YAAA,MAAM,EAAE,CAACE,IAAD,EAAO5C,IAAP,KAAgB2C,OAAO,CAACC,IAAD,EAAO5C,IAAP,CAJnC;AAKI,YAAA,KAAK,EAAE,CAAC4C,IAAD,EAAO5C,IAAP,KAAgB2C,OAAO,CAACC,IAAD,EAAO5C,IAAP,CALlC;AAMI,YAAA,OAAO,EAAGA,IAAD,IAAUoD,SAAS,CAACpD,IAAD,CANhC;AAOI,YAAA,QAAQ,EAAE;AAPd;AAAA;AAAA;AAAA;AAAA,kBADJ;AAYH,SAbG,CAFJ,gBAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AApBJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAwBI;AAAK,QAAA,KAAK,EAAE;AAAC8D,UAAAA,OAAO,EAAE,MAAV;AAAkBC,UAAAA,aAAa,EAAE;AAAjC,SAAZ;AAAA,gCACI;AAAA,iCACI,QAAC,MAAD;AAAQ,YAAA,KAAK,EAAE;AAACI,cAAAA,MAAM,EAAE;AAAT,aAAf;AAAiC,YAAA,OAAO,EAAEd,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,gBADJ,eAMI;AAAK,UAAA,KAAK,EAAE;AAACe,YAAAA,UAAU,EAAE;AAAb,WAAZ;AAAA,kCACI;AAAK,YAAA,KAAK,EAAE;AAACN,cAAAA,OAAO,EAAE,MAAV;AAAkBE,cAAAA,cAAc,EAAE,QAAlC;AAA4CK,cAAAA,UAAU,EAAE,QAAxD;AAAkEC,cAAAA,KAAK,EAAE;AAAzE,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADJ,eAII,QAAC,cAAD;AACI,YAAA,KAAK,EAAE;AAACH,cAAAA,MAAM,EAAE;AAAT,aADX;AAEI,YAAA,KAAK,EAAExC,IAFX;AAGI,YAAA,QAAQ,EAAEmB,CAAC,IAAIlB,OAAO,CAACkB,CAAD,CAH1B;AAAA,sBAMIpB,OAAO,CAACS,GAAR,CAAYC,EAAE,iBACV,QAAC,QAAD,CAAU,IAAV;AAEI,cAAA,QAAQ,EAAEA,EAFd;AAAA,wBAIKA;AAJL,eACSA,EADT;AAAA;AAAA;AAAA;AAAA,oBADJ;AANJ;AAAA;AAAA;AAAA;AAAA,kBAJJ,eAoBI,QAAC,UAAD;AAAA,oCACI,QAAC,UAAD,CAAY,IAAZ;AAAA,wBAAkB;AAAlB;AAAA;AAAA;AAAA;AAAA,oBADJ,eAEI,QAAC,UAAD,CAAY,IAAZ;AAAA,wBAAkB;AAAlB;AAAA;AAAA;AAAA;AAAA,oBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,kBApBJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBANJ;AAAA;AAAA;AAAA;AAAA;AAAA,cAxBJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAFJ,eA6DQ;AAAK,MAAA,KAAK,EAAE;AAAC0B,QAAAA,OAAO,EAAE9C,OAAO,GAAG,MAAH,GAAY;AAA7B,OAAZ;AAAA,6BACI,QAAC,KAAD;AAAO,QAAA,GAAG,EAAEP,OAAZ;AAAqB,QAAA,KAAK,EAAE;AAACyD,UAAAA,KAAK,EAAE,OAAR;AAAiBK,UAAAA,MAAM,EAAE;AAAzB;AAA5B;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YA7DR,eAgEQ,QAAC,KAAD;AACI,MAAA,IAAI,EAAIrD,SADZ;AAEI,MAAA,MAAM,EAAE,MAAMC,YAAY,CAAC,KAAD,CAF9B;AAGI,MAAA,QAAQ,EAAE,UAHd;AAII,MAAA,QAAQ,EAAI,KAJhB;AAAA,8BAMI,QAAE,KAAF,CAAQ,MAAR;AAAe,QAAA,WAAW,MAA1B;AAAA,+BACA,QAAE,KAAF,CAAQ,KAAR;AAAA,0BAAiBnB,IAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AADA;AAAA;AAAA;AAAA;AAAA,cANJ,eASI,QAAE,KAAF,CAAQ,IAAR;AAAA,gCACI,QAAC,UAAD;AACI,UAAA,MAAM,EAAEA,IADZ;AAEI,UAAA,IAAI,EAAEuB;AAFV;AAAA;AAAA;AAAA;AAAA,gBADJ,eAKI,QAAC,KAAD;AAAO,UAAA,GAAG,EAAEd,OAAZ;AAAqB,UAAA,KAAK,EAAE;AAACyD,YAAAA,KAAK,EAAE,OAAR;AAAiBK,YAAAA,MAAM,EAAE,OAAzB;AAAkCJ,YAAAA,MAAM,EAAE;AAA1C;AAA5B;AAAA;AAAA;AAAA;AAAA,gBALJ;AAAA;AAAA;AAAA;AAAA;AAAA,cATJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAhER,eAkFQ,QAAC,QAAD;AACI,MAAA,IAAI,EAAE/C,YADV;AAEI,MAAA,OAAO,EAAEC,eAFb;AAGI,MAAA,OAAO,EAAEC,UAHb;AAII,MAAA,IAAI,EAAEvB,OAJV;AAKI,MAAA,KAAK,EAAC,kDALV;AAMI,MAAA,SAAS,EAAEI,UANf;AAOI,MAAA,IAAI,EAAEH,IAPV;AAQI,MAAA,OAAO,EAAEW,OARb;AASI,MAAA,KAAK,EAAEC,KATX;AAUI,MAAA,QAAQ,EAAEC,QAVd;AAWI,MAAA,cAAc,EAAEE,cAXpB;AAYI,MAAA,OAAO,EAAED,OAZb;AAaI,MAAA,GAAG,EAAEwC;AAbT;AAAA;AAAA;AAAA;AAAA,YAlFR;AAAA;AAAA;AAAA;AAAA;AAAA,UADE,gBAoGF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UArGR;AA0GH,CAnQM;;GAAM9D,S;;KAAAA,S","sourcesContent":["import { useSelector } from 'react-redux';\nimport {Header} from '../ui-components/Header'\n// import cl from '../../../styles/Info.module.css';\n\nimport { useState, useMemo } from 'react';\n// import Image from '../../ui-components/Image';\nimport { Container, DropdownButton, Dropdown, Image, Pagination } from 'react-bootstrap';\nimport fs from 'fs';\nimport { useEffect } from 'react';\nimport axios from 'axios';\nimport { TableComp } from '../ui-components/TableComp';\nimport { TableChars } from '../ui-components/TableChars';\nimport { Modal, Button } from 'react-bootstrap';\n//const fetch = require('node-fetch');\nimport cl from '../../styles/Countries.module.css'\nimport { AddModal } from '../modals/AddModal';\nexport const Countries = (props) => {\n\n    //let arr = countries;\n    // let jsx = '';\n    // for (let el of arr)\n    // {\n    //     let fields = el.to;\n    //     jsx += <p>{el.name}</p>\n    //     for (let fi of fields)\n    //         jsx += <li>{fi}</li>\n    // }\n    \n    let init = []\n    const [body, setBody] = useState(init);\n    const [str, setStr] = useState({ country: 'Россия', name: '' });\n    const [isload, setLoad] = useState(false);\n    const [countNames, setCountNames] = useState([]);\n    const [countries, setCountries] = useState({});\n    const [filteredCountries, setFilteredCountries] = useState({});\n    const [urlName, setUrlName] = useState('');\n    const [name, setName] = useState('');\n    const [fname, setFname] = useState('');\n    const [capture, setCaptureFile] = useState({});\n    const [visible, setVisible] = useState(false);\n    const [showModal, setShowModal] = useState(false);\n    const [showAddModal, setShowAddModal] = useState(false);\n    const [country, setCountry] = useState('Россия')\n    const [chars, setChars] = useState({});\n    const bodyStatic = ['Зига', \"Твой\", \"Дом\"];\n\n    const sortArr = [\"По дате\", 'По имени'];\n    const [sort, setSort] = useState('По дате')\n    console.log('country', countries);\n\n    const HeaderMemo = useMemo(() => Header, [])\n    useEffect(async () => {\n        setLoad(false);\n        let fetchCounts;\n        fetchCounts = await axios.get('http://localhost:5000/countries');\n        fetchCounts = fetchCounts.data.countries;\n        setCountries([...fetchCounts]);\n        setFilteredCountries([...fetchCounts]);\n        setCountNames(fetchCounts.map(el => el.name));\n        setLoad(true);\n        console.log('countries', countries);\n    }, [countries.length]);\n\n    useEffect(async () => {\n        if (countries != undefined && countries.length) {\n            console.log('Сработал');\n            const cou = {\n                \"name\": \"США\",\n                \"to\": [\n                          \"RQ-11 Raven\",\n                          \"Wasp III\",\n                          \"RQ-20 Puma\",\n                          \"RQ-16 T-Hawk\",\n                          \"MQ-9 Reaper\",\n                          \"RQ-4 Global Hawk\",\n                          \"RQ-170 Sentinel\"\n                ]\n      };\n            console.log('defcountriesbef', countries);\n            if (sort == 'По имени') {\n\n\n                //ИЗМЕНЯЕТ ИСХОДНЫЙ countries\n                setFilteredCountries(() => {\n                    let filcounts = filteredCountries;\n                    filcounts.map(c => {\n                            c.to = c.to.sort();\n                            return c;\n                        });\n                    return filcounts;\n                })\n\n                //ИЗМЕНЯЕТ ИСХОДНЫЙ countries\n                // setFilteredCountries(prev => {\n                //     prev.map(c => {\n                //         c.to = c.to.sort();\n                //         return c;\n                //     });\n                //     return prev;\n                // })\n\n\n\n                //setFilteredCountries([...filteredCountries, cou]);\n\n                console.log('По имени', countries, filteredCountries);\n\n            }\n\n            else {\n                setFilteredCountries([...countries]);\n                console.log('По дате', countries, filteredCountries);\n            }\n                \n            console.log('defcountries', countries);\n            console.log('filteted', filteredCountries);\n            \n        }\n\n    }, [sort])\n    //console.log(jsx)                 {\n    //                 countNames.map(el => <option>{el}</option>)\n    //                }\n    const showPic = (flag, name) => {\n        setUrlName(`http://localhost:5000/image?name=${name}`);\n        setVisible(flag);\n        \n    }\n\n    const setNameFunc = (e) => {\n        setStr(prev => {\n            return { ...prev, name: e.target.value };\n        })\n    }\n\n    const getImage = async (name) => {\n        console.log('infunc');\n         let img = (await axios.get(`http://localhost:5000/image?name=${name}`)).data;\n         console.log('img', img);\n         return img;\n    }\n\n    const openModal = async (name) => {\n        console.log('aame', name);\n        setShowModal(true);\n        setName(name);\n        let chars = (await axios.get(`http://localhost:5000/info?name=${name}`)).data;\n        //console.log('chars', chars);\n        setChars(chars);\n    }\n\n    const addNote = () => {\n        setShowAddModal(true);\n    }\n\n    const add = () => {\n        console.log('capt', capture);\n        const data = new FormData();\n        data.append('file', capture);\n        //capture.map(dat => URL.createObjectURL(dat));\n        let url = URL.createObjectURL(capture);\n        console.log('url', url);\n        axios.post('http://localhost:5000/upload', data, {\n            headers: {\n                \"Content-type\": \"form/multipart\"\n            }\n        });\n\n    }\n    return (\n        isload ?\n            <div className={cl.Countries}>\n                <HeaderMemo name=\"Страны лидеры по производству БПЛА\" />\n                <div>\n                    <div style={{display: 'flex', flexDirection: 'row', justifyContent: 'space-between'}}>\n                        {\n                        filteredCountries.length ?\n                        (\n                            filteredCountries.map(count => {\n                            return (\n                                <TableComp\n                                    style={{width: '30px'}}\n                                    header={count.name}\n                                    body={count.to}\n                                    onOver={(flag, name) => showPic(flag, name)}\n                                    onOut={(flag, name) => showPic(flag, name)}\n                                    onClick={(name) => openModal(name)}\n                                    propFlag={true}\n                                />\n                            )\n\n                        })\n                        )\n                        :\n                        <p>Ждите</p>\n                        }\n                    </div>\n                    <div style={{display: 'flex', flexDirection: 'row'}}>\n                        <div>\n                            <Button style={{margin: '10px'}} onClick={addNote}>+</Button>\n                        </div>\n                        \n                        \n                        <div style={{marginLeft: '20px'}}>\n                            <div style={{display: 'flex', justifyContent: 'center', alignItems: 'center', color: 'white'}}>\n                            Сортировать по\n                            </div>\n                            <DropdownButton\n                                style={{margin: '10px'}}\n                                title={sort}\n                                onSelect={e => setSort(e)}\n                            >\n                            {\n                                sortArr.map(el =>\n                                    <Dropdown.Item\n                                        key={el}\n                                        eventKey={el}\n                                    >\n                                        {el}\n                                    </Dropdown.Item>\n                                    )\n                            }\n                            </DropdownButton>\n                            <Pagination>\n                                <Pagination.Item>{1}</Pagination.Item>\n                                <Pagination.Item>{2}</Pagination.Item>\n                            </Pagination>\n                        </div>\n                        \n                    </div>\n                    \n                </div>\n                    <div style={{display: visible ? 'flex' : 'none'}}>\n                        <Image src={urlName} style={{width: '320px', height: '240px'}} />\n                    </div>\n                    <Modal\n                        show ={ showModal }\n                        onHide={() => setShowModal(false)}\n                        backdrop =\" static \"\n                        keyboard ={ false }\n                    >\n                        < Modal.Header closeButton >\n                        < Modal.Title > {name}</ Modal.Title >\n                        </ Modal.Header >\n                        < Modal.Body >\n                            <TableChars\n                                header={name}\n                                body={chars}\n                            />\n                            <Image src={urlName} style={{width: '320px', height: '240px', margin: '10px'}} />\n                        </Modal.Body >\n                    </ Modal >\n\n                    <AddModal\n                        show={showAddModal}\n                        setShow={setShowAddModal}\n                        setItem={setCountry}\n                        item={country}\n                        title=\"Добавить\"\n                        countries={countNames}\n                        name={name}\n                        setName={setName}\n                        fname={fname}\n                        setFname={setFname}\n                        setCaptureFile={setCaptureFile}\n                        capture={capture}\n                        add={add}\n                    />\n            </div>\n            :\n            <div>\n                Падажжи\n            </div>\n            \n    );\n}\n"]},"metadata":{},"sourceType":"module"}